<?xml version="1.0"?>
<configuration>
	
	<configSections>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
	</configSections>

	
	<log4net>
		<root>
			<level value="ALL" />
			<appender-ref ref="JsonFileAppender" />
			
			<appender-ref ref="SqlServerAppender" />
		    
		</root>
		<appender name="JsonFileAppender" type="log4net.Appender.FileAppender">
			<bufferSize value="1" />
			<file value="F:\Workspaces\DevFrameworkLog\log.json"/>
			<layout type="DevFramework.Core.CrossCuttingConcerns.Logging.Log4Net.Layouts.JsonLayout"/>
		</appender>
		<appender name="SqlServerAppender" type="log4net.Appender.AdoNetAppender">
			<bufferSize value="1"/>
			<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral,PublicKeyToken=b77a5c561934e089"/>
			<connectionString value="Data Source=(localdb)\MSSQLLocalDB; Initial Catalog = NorthWind; Integrated Security = True;"/>
			<commandText value="INSERT INTO dbo.Logs ([Detail],[Date],[Audit]) VALUES (@logDetail,@log_date,@audit)"/>
			<parameter>
				<parameterName value="@logDetail"/>
				<dbType value="String"/>
				<size value="4000"/>
				<layout type="DevFramework.Core.CrossCuttingConcerns.Logging.Log4Net.Layouts.JsonLayout"/>
			</parameter>
			<parameter>
				<parameterName value="@log_date"/>
				<dbType value="DateTime"/>
				<layout type="log4net.Layout.PatternLayout" value="%date{dd'-'MM'-'yyyy HH':'mm':'ss'.'fff}"/>
			</parameter>
			<parameter>
				<parameterName value="@audit"/>
				<dbType value="String"/>
				<size value="50"/>
				<layout type="log4net.Layout.PatternLayout" value="%level"/>
			</parameter>
		</appender>
		<logger name="JsonFileLogger">
			<!--<bufferSize value="1" />-->
			<level value="ALL"/>
			<appender-ref ref="JsonFileAppender"/>
		</logger>
		<logger name="DatabaseLogger">
			<!--<bufferSize value="1" />-->
			<level value="ALL"/>
			<appender-ref ref="SqlServerAppender"/>
		</logger>
		
	</log4net>
	<system.web>
		<compilation debug="true" targetFramework="4.7.2" />
		<httpRuntime targetFramework="4.7.2" />
	</system.web>

</configuration>
